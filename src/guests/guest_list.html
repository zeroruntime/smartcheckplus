<!DOCTYPE html>
<html   lang="en" >

<head>
	@@include("../partials/head.html")
	<title>Spike TailwindCSS HTML Admin Template</title>
</head>

<body class=" bg-surface">
	<main>
		<!--start the project-->
		<div id="main-wrapper" class="flex min-h-screen p-5 xl:pr-0">
			<aside id="application-sidebar-brand"
				class="hs-overlay hs-overlay-open:translate-x-0 -translate-x-full  transform hidden xl:block xl:translate-x-0 xl:end-auto xl:bottom-0 fixed xl:top-5 xl:left-auto top-0 left-0 with-vertical h-screen z-[999] shrink-0  w-[270px] shadow-md xl:rounded-md rounded-none bg-white left-sidebar   transition-all duration-300" >
				@@include("../partials/sidebar.html")
			</aside>
			<div class="w-full px-0 page-wrapper xl:px-6">

				<!-- Main Content -->
				<main class="h-full max-w-full">
					<div class="container flex flex-col gap-6 p-0 full-container">
					<!--  Header Start -->
				<header class="w-full px-6 py-4 text-sm bg-white rounded-md shadow-md ">
					@@include("../partials/header.html")
				</header>
				<!--  Header End -->

                <div class="max-w-full">
                    <div class="container full-container">
                        <!----Breadcrumb Start---->
                        <div class="mb-6 shadow-none card">
                            <div class="p-6 card-body">
                                <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
                                    <h4 class="text-xl font-semibold text-dark dark:text-white">Guest Management</h4>
                                    <ol class="flex items-center" aria-label="Breadcrumb">
                                        <li class="flex items-center">
                                            <a class="text-sm font-medium" href="{% url "dashboard" %}">
                                                Home
                                            </a>
                                        </li>
                                        <li>
                                            <div class="h-1 w-1 rounded-full bg-bodytext mx-2.5 flex items-center mt-1"></div>
                                        </li>
                                        <li class="flex items-center text-sm font-medium" aria-current="page">
                                            Guest List
                                        </li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                        <!----Breadcrumb End---->

                        <div class="grid grid-cols-12 gap-6">
                            <div class="col-span-12">
                                <div class="card">
                                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                                        <div class="flex flex-col justify-between gap-4 md:flex-row md:items-center">
                                            <h5 class="mb-0 card-title">Guest List</h5>
                                            <form method="GET" action="{% url 'guest_list' %}" class="flex items-center">
                                                <input type="text" name="q" value="{{ query }}" placeholder="Search guests..."
                                                       class="px-4 py-2 border rounded-md dark:bg-darkborder dark:border-darkborder dark:text-white">
                                                <button type="submit" class="px-4 py-2 ml-2 text-white rounded-md bg-primary hover:bg-primary-dark">
                                                    Search
                                                </button>
                                            </form>
                                        </div>
                                    </div>

                                    <div class="card-body">
                                        <div class="flex flex-col">
                                            <div class="-m-1.5 overflow-x-auto">
                                                <div class="p-1.5 min-w-full inline-block align-middle">
                                                    <div class="overflow-hidden dark:border-darkborder">
                                                        <table class="min-w-full divide-y divide-border dark:divide-darkborder">
                                                            <thead>
                                                                <tr>
                                                                    <th scope="col" class="p-4 text-base font-semibold capitalize text-start text-link dark:text-white">Guest ID</th>
                                                                    <th scope="col" class="p-4 text-base font-semibold capitalize text-start text-link dark:text-white">Name</th>
                                                                    <th scope="col" class="p-4 text-base font-semibold capitalize text-start text-link dark:text-white">Organization</th>
                                                                    <th scope="col" class="p-4 text-base font-semibold capitalize text-start text-link dark:text-white">Contact</th>
                                                                    <th scope="col" class="p-4 text-base font-semibold capitalize text-start text-link dark:text-white">Purpose</th>
                                                                    <th scope="col" class="p-4 text-base font-semibold capitalize text-start text-link dark:text-white">Registered</th>
                                                                    <th scope="col" class="p-4 text-base font-semibold capitalize text-start text-link dark:text-white">Actions</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody class="divide-y divide-border dark:divide-darkborder">
                                                                {% for guest in guests %}
                                                                <tr>
                                                                    <td class="p-4 whitespace-nowrap">
                                                                        <div class="flex items-center gap-4">
                                                                            {% comment %} {% if guest.qr_code %}
                                                                            <img src="{{ guest.qr_code.url }}" alt="QR Code" class="w-10 h-10 rounded-lg">
                                                                            {% endif %} {% endcomment %}
                                                                            <div>
                                                                                <h6 class="mb-0 text-sm leading-tight">{{ guest.guest_id }}</h6>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td class="p-4 whitespace-nowrap">
                                                                        <div>
                                                                            <h6 class="mb-0 text-base leading-tight">{{ guest.first_name }} {{ guest.last_name }}</h6>
                                                                            <span class="text-sm font-light text-dark dark:text-darklink">{{ guest.email|default:"No email" }}</span>
                                                                        </div>
                                                                    </td>
                                                                    <td class="p-4 text-sm whitespace-nowrap">
                                                                        <p class="text-base font-light text-dark dark:text-darklink">{{ guest.school_or_organization }}</p>
                                                                    </td>
                                                                    <td class="p-4 whitespace-nowrap">
                                                                        <p class="text-base font-light text-dark dark:text-darklink">{{ guest.contact_number|default:"-" }}</p>
                                                                    </td>
                                                                    <td class="p-4 whitespace-nowrap">
                                                                        <p class="text-base font-light text-dark dark:text-darklink">{{ guest.purpose|truncatechars:30 }}</p>
                                                                    </td>
                                                                    <td class="p-4 whitespace-nowrap">
                                                                        <span class="text-sm font-light text-dark dark:text-darklink">{{ guest.created_at|date:"M d, Y" }}</span>
                                                                    </td>
                                                                    <td class="p-4 font-medium whitespace-nowrap text-start">
                                                                        <div class="hs-dropdown relative inline-flex [--placement:left-top]">
                                                                            <button id="hs-dropdown-guest-{{ guest.id }}" type="button"
                                                                                    class="inline-flex items-center justify-center w-8 h-8 mx-4 text-sm font-medium rounded-full hs-dropdown-toggle gap-x-2 hover:bg-gray-200 dark:hover:bg-darkprimary dark:hover:text-white">
                                                                                <i class="text-lg font-medium leading-tight ti ti-dots-vertical text-dark dark:text-darklink"></i>
                                                                            </button>

                                                                            <div class="hs-dropdown-menu overflow-hidden z-[1] transition-[opacity,margin] duration hs-dropdown-open:opacity-100 opacity-0 min-w-40 hidden"
                                                                                 aria-labelledby="hs-dropdown-guest-{{ guest.id }}">
                                                                                <div class="flex flex-col">
                                                                                    <div class="px-4 py-1 bg-hover">
                                                                                        <a class="flex items-center gap-2 font-medium"
                                                                                           href="{% url "guest_detail" guest.guest_id %}">
                                                                                            <i class="text-base ti ti-eye"></i>View
                                                                                        </a>
                                                                                    </div>
                                                                                    <div class="px-4 py-1 bg-hover">
                                                                                        <a class="flex items-center gap-2 font-medium"
                                                                                           href="">
                                                                                            <i class="text-base ti ti-edit"></i>Edit
                                                                                        </a>
                                                                                    </div>
                                                                                    <div class="px-4 py-1 bg-hover">
                                                                                        <a class="flex items-center gap-2 font-medium text-error"
                                                                                           href="">
                                                                                            <i class="text-base ti ti-trash"></i>Delete
                                                                                        </a>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                {% empty %}
                                                                <tr>
                                                                    <td colspan="7" class="p-4 text-center text-gray-500 dark:text-gray-400">
                                                                        No guests found.
                                                                    </td>
                                                                </tr>
                                                                {% endfor %}
                                                            </tbody>
                                                        </table>
                                                    </div>

                                                    <!-- Pagination -->
                                                    <div class="flex items-center justify-between mt-4">
                                                        <div class="text-sm text-gray-500 dark:text-gray-400">
                                                            Showing {{ guests.start_index }} to {{ guests.end_index }} of {{ guests.paginator.count }} entries
                                                        </div>
                                                        <div class="flex space-x-1">
                                                            {% if guests.has_previous %}
                                                                <a href="?page=1&q={{ query }}" class="px-3 py-1 border rounded-md dark:border-darkborder dark:text-white hover:bg-gray-100 dark:hover:bg-darkprimary">
                                                                    &laquo; First
                                                                </a>
                                                                <a href="?page={{ guests.previous_page_number }}&q={{ query }}" class="px-3 py-1 border rounded-md dark:border-darkborder dark:text-white hover:bg-gray-100 dark:hover:bg-darkprimary">
                                                                    Previous
                                                                </a>
                                                            {% endif %}

                                                            {% for num in guests.paginator.page_range %}
                                                                {% if guests.number == num %}
                                                                    <span class="px-3 py-1 text-white border rounded-md bg-primary dark:bg-darkprimary">{{ num }}</span>
                                                                {% elif num > guests.number|add:'-3' and num < guests.number|add:'3' %}
                                                                    <a href="?page={{ num }}&q={{ query }}" class="px-3 py-1 border rounded-md dark:border-darkborder dark:text-white hover:bg-gray-100 dark:hover:bg-darkprimary">
                                                                        {{ num }}
                                                                    </a>
                                                                {% endif %}
                                                            {% endfor %}

                                                            {% if guests.has_next %}
                                                                <a href="?page={{ guests.next_page_number }}&q={{ query }}" class="px-3 py-1 border rounded-md dark:border-darkborder dark:text-white hover:bg-gray-100 dark:hover:bg-darkprimary">
                                                                    Next
                                                                </a>
                                                                <a href="?page={{ guests.paginator.num_pages }}&q={{ query }}" class="px-3 py-1 border rounded-md dark:border-darkborder dark:text-white hover:bg-gray-100 dark:hover:bg-darkprimary">
                                                                    Last &raquo;
                                                                </a>
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

				</main>
				<!-- Main Content End -->

			</div>
		</div>
		<!--end of project-->
	</main>


	@@include("../partials/scripts.html")

</body>

</html>
