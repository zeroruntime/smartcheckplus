<!DOCTYPE html>
<html   lang="en" >

<head>
	@@include("../partials/head.html")
	<title>Spike TailwindCSS HTML Admin Template</title>
</head>

<body class=" bg-surface">
	<main>
		<!--start the project-->
		<div id="main-wrapper" class="flex min-h-screen p-5 xl:pr-0">
			<aside id="application-sidebar-brand"
				class="hs-overlay hs-overlay-open:translate-x-0 -translate-x-full  transform hidden xl:block xl:translate-x-0 xl:end-auto xl:bottom-0 fixed xl:top-5 xl:left-auto top-0 left-0 with-vertical h-screen z-[999] shrink-0  w-[270px] shadow-md xl:rounded-md rounded-none bg-white left-sidebar   transition-all duration-300" >
				@@include("../partials/sidebar.html")
			</aside>
			<div class="w-full px-0 page-wrapper xl:px-6">

				<!-- Main Content -->
				<main class="h-full max-w-full">
					<div class="container flex flex-col gap-6 p-0 full-container">
					<!--  Header Start -->
				<header class="w-full px-6 py-4 text-sm bg-white rounded-md shadow-md ">
					@@include("../partials/header.html")
				</header>
				<!--  Header End -->

<div class="max-w-full">
    <div class="container full-container">
<!-- Breadcrumb Start -->
<div class="mb-6 shadow-none card">
    <div class="p-6 card-body">
        <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
            <h4 class="text-xl font-semibold text-dark dark:text-white">
                Student Management
            </h4>
            <nav class="text-sm" aria-label="Breadcrumb">
                <ol class="flex items-center space-x-2 text-gray-600 dark:text-gray-300">
                    <li>
                        <a href="{% url 'dashboard' %}" class="font-medium hover:text-primary">
                            Home
                        </a>
                    </li>
                    <li>
                        <span class="mx-2 text-gray-400 dark:text-gray-500">/</span>
                    </li>
                    <li class="font-medium text-gray-500 dark:text-gray-400" aria-current="page">
                        Students
                    </li>
                </ol>
            </nav>
        </div>
    </div>
</div>
<!-- Breadcrumb End -->


        <div class="grid grid-cols-12 gap-6">
            <div class="col-span-12">
                <div class="card">
                    <!-- Header -->
                    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                        <div class="flex flex-col justify-between gap-4 md:flex-row md:items-center">
                            <h5 class="mb-0 card-title">Student List</h5>
                            <div class="flex flex-wrap items-center gap-4">
                                <!-- Search Form -->
                                <form method="get" class="flex items-center gap-2">
                                    <div class="relative">
                                        <input type="text" name="q" value="{{ query }}" placeholder="Search students..."
                                            class="py-2 pl-10 pr-4 border rounded-md dark:bg-darkborder dark:border-darkborder dark:text-white focus:ring-2 focus:ring-primary focus:outline-none">
                                        <i class="absolute text-sm text-gray-400 -translate-y-1/2 ti ti-search left-3 top-1/2"></i>
                                    </div>
                                    <button type="submit"
                                        class="px-4 py-2 text-white rounded-md bg-primary hover:bg-primary-dark">
                                        Search
                                    </button>
                                </form>

                                <!-- Student Type Toggle -->
                                {% comment %} <div class="flex gap-2">
                                    <a href="?type=regular{% if query %}&q={{ query }}{% endif %}"
                                       class="px-3 py-1 rounded-md text-sm transition
                                       {% if student_type == 'regular' %}
                                       bg-blue-700 text-white
                                       {% else %}
                                           bg-gray-200 text-gray-700 dark:bg-darkborder dark:text-white
                                       {% endif %}">
                                        Regular
                                    </a>
                                    <a href="?type=temporary{% if query %}&q={{ query }}{% endif %}"
                                       class="px-3 py-1 rounded-md text-sm transition
                                       {% if student_type == 'temporary' %}
                                       bg-blue-700 text-white
                                       {% else %}
                                           bg-gray-200 text-gray-700 dark:bg-darkborder dark:text-white
                                       {% endif %}">
                                        Temporary
                                    </a>
                                </div> {% endcomment %}

                                <div class="flex gap-2">
                                    <!-- Regular Button -->
                                    {% if student_type == 'regular' %}
                                        <span class="px-3 py-1 text-sm text-white bg-blue-700 rounded-md cursor-default">
                                            Regular
                                        </span>

                                        <span class="px-3 py-1 text-sm text-gray-700 bg-gray-200 rounded-md cursor-default">
                                            Temporary
                                        </span>
                                    {% else %}
                                    <span class="px-3 py-1 text-sm text-gray-700 bg-gray-200 rounded-md cursor-default">
                                        Regular
                                    </span>

                                        <span class="px-3 py-1 text-sm text-white bg-blue-700 rounded-md cursor-default">
                                            Temporary
                                        </span>
                                    {% endif %}

                                    <!-- Temporary Button -->
                                    {% comment %} {% if student_type == 'temporary' %}
                                        <span class="px-3 py-1 text-sm text-white bg-blue-700 rounded-md cursor-default">
                                            Temporary
                                        </span>
                                    {% else %}
                                        <a href="{% url 'student_list' %}?type=temporary{% if query %}&q={{ query }}{% endif %}"
                                           class="px-3 py-1 text-sm text-gray-700 transition bg-gray-200 rounded-md dark:bg-darkborder dark:text-white hover:bg-gray-300">
                                            Temporary
                                        </a>
                                    {% endif %} {% endcomment %}
                                </div>

                            </div>
                        </div>
                    </div>

                    <!-- Table -->
                    <div class="card-body">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-border dark:divide-darkborder">
                                <thead>
                                    <tr>
                                        <th class="p-4 text-base font-semibold capitalize text-start text-link dark:text-white">Student</th>
                                        <th class="p-4 text-base font-semibold capitalize text-start text-link dark:text-white">ID</th>
                                        <th class="p-4 text-base font-semibold capitalize text-start text-link dark:text-white">Type</th>
                                        <th class="p-4 text-base font-semibold capitalize text-start text-link dark:text-white">Status</th>
                                        <th class="p-4 text-base font-semibold capitalize text-start text-link dark:text-white">QR</th>
                                        <th class="p-4 text-base font-semibold capitalize text-start text-link dark:text-white">Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-border dark:divide-darkborder">
                                    {% for student in students %}
                                    <tr>
                                        <td class="p-4 whitespace-nowrap">
                                            <div class="flex items-center gap-4">
                                                <div class="flex items-center justify-center w-12 h-12 text-xl font-bold text-white bg-blue-700 rounded-full">
                                                    {{ student.first_name|first }}{{ student.last_name|first }}
                                                </div>
                                                <div>
                                                    <h6 class="text-base font-medium">{{ student.first_name }} {{ student.last_name }}</h6>
                                                    <p class="text-sm text-dark dark:text-darklink">
                                                        {{ student.class_status|default:"Null" }}
                                                    </p>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="p-4 text-sm text-dark dark:text-darklink whitespace-nowrap">
                                            {{ student.student_id }}
                                        </td>
                                        <td class="p-4 whitespace-nowrap">
                                            <span class="inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full
                                                {% if student_type == 'regular' %}
                                                    bg-lightprimary text-primary dark:bg-darkprimary dark:text-primary
                                                {% else %}
                                                    bg-lightsecondary text-secondary dark:bg-darksecondary dark:text-secondary
                                                {% endif %}">
                                                {{ student_type|title }}
                                            </span>
                                        </td>
                                        {% if student_type == "temporary" %}
                                        <td class="p-4 whitespace-nowrap">
                                            {% if student.status == 'Active' %}
                                                <span class="inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-lightsuccess text-success dark:bg-darksuccess dark:text-success">
                                                    <i class="mr-1 text-sm ti ti-circle"></i>
                                                    Active
                                                </span>
                                            {% else %}
                                                <span class="inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-lightdanger text-danger dark:bg-darkdanger dark:text-danger">
                                                    <i class="mr-1 text-sm ti ti-circle-off"></i>
                                                    Expired
                                                </span>
                                            {% endif %}
                                        </td>
                                        {% else %}
                                        <td class="p-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-lightsuccess text-success dark:bg-darksuccess dark:text-success">
                                                    <i class="mr-1 text-sm ti ti-circle"></i>
                                                    Active
                                                </span>
                                        </td>
                                        {% endif %}
                                        <td class="p-4 whitespace-nowrap">
                                            <div class="flex items-center gap-2">
                                                <img src="{{ student.qr_code.url }}" alt="QR Code" class="h-10">
                                            </div>
                                        </td>
                                        <td class="p-4 whitespace-nowrap">
                                            <div class="flex items-center gap-2">
                                                <a href="{% url "student_detail" student.student_id %}" class="p-2 rounded-full text-primary hover:bg-gray-100 dark:hover:bg-darkprimary" >
                                                    <i class="ti ti-eye"></i>
                                                </a>
                                                <a href="" class="p-2 rounded-full text-warning hover:bg-gray-100 dark:hover:bg-darkwarning">
                                                    <i class="ti ti-edit"></i>
                                                </a>
                                                <a href="" class="p-2 rounded-full text-error hover:bg-gray-100 dark:hover:bg-darkerror">
                                                    <i class="ti ti-trash"></i>
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                    {% empty %}
                                    <tr>
                                        <td colspan="5" class="p-4 text-center text-gray-500 dark:text-gray-400">
                                            No students found.
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination -->
                        {% if students.paginator.num_pages > 1 %}
                        <div class="flex flex-col justify-between gap-4 mt-4 md:flex-row md:items-center">
                            <div class="text-sm text-gray-600 dark:text-gray-300">
                                Showing page {{ students.number }} of {{ students.paginator.num_pages }}
                            </div>
                            <div class="flex space-x-1">
                                {% if students.has_previous %}
                                    <a href="?page=1&type={{ student_type }}{% if query %}&q={{ query }}{% endif %}" class="px-3 py-1 border rounded-md dark:border-darkborder">
                                        <i class="ti ti-chevrons-left"></i>
                                    </a>
                                    <a href="?page={{ students.previous_page_number }}&type={{ student_type }}{% if query %}&q={{ query }}{% endif %}" class="px-3 py-1 border rounded-md dark:border-darkborder">
                                        <i class="ti ti-chevron-left"></i>
                                    </a>
                                {% endif %}

                                {% for num in students.paginator.page_range %}
                                    {% if students.number == num %}
                                        <span class="px-3 py-1 text-white rounded-md bg-primary">{{ num }}</span>
                                    {% elif num > students.number|add:'-3' and num < students.number|add:'3' %}
                                        <a href="?page={{ num }}&type={{ student_type }}{% if query %}&q={{ query }}{% endif %}" class="px-3 py-1 border rounded-md dark:border-darkborder">
                                            {{ num }}
                                        </a>
                                    {% endif %}
                                {% endfor %}

                                {% if students.has_next %}
                                    <a href="?page={{ students.next_page_number }}&type={{ student_type }}{% if query %}&q={{ query }}{% endif %}" class="px-3 py-1 border rounded-md dark:border-darkborder">
                                        <i class="ti ti-chevron-right"></i>
                                    </a>
                                    <a href="?page={{ students.paginator.num_pages }}&type={{ student_type }}{% if query %}&q={{ query }}{% endif %}" class="px-3 py-1 border rounded-md dark:border-darkborder">
                                        <i class="ti ti-chevrons-right"></i>
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>


				</main>
				<!-- Main Content End -->

			</div>
		</div>
		<!--end of project-->
	</main>


	@@include("../partials/scripts.html")

</body>

</html>
